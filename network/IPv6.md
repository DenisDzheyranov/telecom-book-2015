# Internet Protocol version 6
****************************************************
Одним из самых главных недостатков интернет протокола IPv4 является относительно небольшое количество выдаваемых адресов около 4,23 миллиарда адресов, так как это число уже не кажется столь большим в сравнении с количеством задействованных устройств подключенных к сети интернет. По сей день использование IPv4 проходит штатно, поскольку используются различные технологии экономии использования сетевых адресов, в частности технология NAT (Network Address Translation, преобразование сетевых адресов), но уже всем понятно, что дни эксплуатации IPv4 подходят к концу, поскольку в ближайшем будущем предусматривается наделять возможностью доступа к интернету всех бытовых приборов (холодильников, СВЧ-печей), для осуществления управления данными приборами удаленно, посредством сети с любой точки Земли.

В сложившейся ситуации переход на новый формат сетевого адреса становится крайне остров. Хотя многие специалисты предвидели проблему нехватки сетевых адресов еще в начале 1990 года, в то же время начала работать группа проектирования Интернета IETF над новой версией сетевого протокола - IPv6. 

Основные решаемые задачи:
-	Возможность доступа к глобальной сети миллиардов хостов даже при нерациональном использовании адресного пространства.
-	Сокращение размера таблиц маршрутизации
-	Упрощение протокола для ускорения обработки пакетов маршрутизации
-	Повышение уровня безопасности протокола
-	Упрощение работы многоадресных рассылок с помощью указания областей рассылки.
-	Перспективы дальнейшего развития протокола в будущем
-	Организация совместимости старого и нового протокола

**Протокол IPv6** разработан в конце 1992 года.

**Протокол IPv6 (Internet Protocol version 6)**— это новая версия интернет протокола (IP), созданная с целью решения проблем, с которыми столкнулась предыдущая версия (IPv4) при её использовании в интернете, одна из которых – это использование длины адреса 128 бит вместо 32.

В наше время протокол IPv6 активно используется во множестве сетей по всему миру, но пока ещё не получил столь широкого распространения в Интернете, как IPv4.

Интернет протокол IPv6 хорошо справляется с основными поставленными задачами. Ему присущи достоинствами интернет протокола IP и лишен некоторых недостатков, к тому не обладает некоторыми новыми возможностями. В общем случае протокол IPv6 несовместим с протоколом IPv4, но зато совместим со всеми остальными протоколами Интернета, включая TCP, UDP, ICMP, OSPF, DNS для чего иногда требуются небольшие изменения.

Особенности IPv6:

•	Протокол IPv6 имеет длину 16 байт, что решает основную проблему - обеспечить практически неограниченный запас интернет – адресов.

•	Протокол IPv6 по сравнению с IPv4 имеет более простой заголовок пакета. Таким образом, маршрутизаторы могут быстрее обрабатывать пакеты, что повышает производительность.

•	Улучшенная поддержка необязательных параметров. Подобное изменение действительно было существенным, так как в новом заголовке требуемые прежде поля стали необязательными.

•	Повышен уровень безопасности, аутентификация и конфиденциальность являются ключевыми чертами нового IP-протокола.

•	Уделено больше внимание типу представляемых услуг. Для этой цели в заголовке пакета IPv4 было отведено 8-разрядное поле.

# Заголовок IPv6

Структура IP пакетов версии 6 представлена на рисунке:

[![Октет](http://imgur.com/IKfSGSD)](http://imgur.com/IKfSGSD)

-	Версия — для IPv6 значение поля должно быть равно 6.
-	Приоритет – используется для того, чтобы различать пакеты с разными требованиями к доставке в реальном времени.
-	Метка потока – применяется для установки между отправителем и получателем псевдосоединения с определенными свойствами и требованиями. Например поток пакетов между двумя процессами на разных хостах может обладать строгими требованиями к задержкам, что потребует резервирование пропускной способности.
-	Длина полезной нагрузки – сообщает, сколько байт следует за 40-байтовым заголовком.
-	Следующий заголовок – сообщает, какой из дополнительных заголовков следует за основным.
-	Мах число транзитных узлов – аналог времени жизни (TTL).

**Дополнительные заголовки**:
1.	Параметры маршрутизации – разнообразная информация для маршрутизаторов;
2.	Параметры получения – дополнительная информация для получателя
3.	Маршрутизация – частичный список транзитных маршрутизаторов на пути пакета;
4.	Фрагментация – управление фрагментами дейтаграмм;
5.	Аутентификация – проверка подлинности отправителя;
6.	Шифрованные данные – информация о зашифрованном содержимом.

# Типы адресов
Unicast - Идентификатор одиночного интерфейса. Пакет, посланный по уникастному адресу, доставляется интерфейсу, указанному в адресе.

Anycast - Идентификатор набора интерфейсов (принадлежащих разным узлам). Пакет, посланный по эникастному адресу, доставляется одному из интерфейсов, указанному в адресе (ближайший, в соответствии с мерой, определенной протоколом маршрутизации).

Multicast - Идентификатор набора интерфейсов (обычно принадлежащих разным узлам). Пакет, посланный по мультикастинг-адресу, доставляется всем интерфейсам, заданным этим адресом.

В IPv6 не существует широковещательных адресов, их функции переданы мультикастинг-адресам.

В IPv6, все нули и все единицы являются допустимыми кодами для любых полей, если не оговорено исключение.

# Модель адресации

IPv6 адреса всех типов ассоциируются с интерфейсами, а не узлами. Так как каждый интерфейс принадлежит только одному узлу, уникастный адрес интерфейса может идентифицировать узел.

IPv6 уникастный адрес соотносится только с одним интерфейсом. Одному интерфейсу могут соответствовать много IPv6 адресов различного типа (уникастные, эникастные и мультикстные). Существует два исключения из этого правила:

-	Одиночный адрес может приписываться нескольким физическим интерфейсам, если приложение рассматривает эти несколько интерфейсов как единое целое при представлении его на уровне Интернет.
-	Маршрутизаторы могут иметь ненумерованные интерфейсы (например, интерфейсу не присваивается никакого IPv6 адреса) для соединений точка-точка, чтобы исключить необходимость вручную конфигурировать и объявлять (advertise) эти адреса. Адреса не нужны для соединений точка-точка маршрутизаторов, если эти интерфейсы не используются в качестве точки отправления или назначения при посылке IPv6 дейтограмм. Маршрутизация здесь осуществляется по схеме близкой к используемой протоколом CIDR в IPv4

IPv6 соответствует модели IPv4, где субсеть ассоциируется с каналом. Одному каналу могут соответствовать несколько субсетей.

# Формы представления IPv6

**Форма шестнадцатеричных чисел и двоеточий**

Эта форма является предпочтительной и имеет вид n:n:n:n:n:n:n:n. Каждый знак n соответствует 4-х значному шестнадцатеричному числу (всего 8 шестнадцатеричных чисел, для каждого числа отводится 16 бит).

Например: 1FA9:FFFF:2621:ACDA:2245:BF98:3412:4167.

**Сжатая форма**

По причине большой длины адрес обычно содержит много нулей подряд. Для упрощения записи адресов используется сжатая форма, в которой смежные последовательности нулевых блоков заменяются парами символов двоеточий (::).Однако такой символ может встречаться в адресе только один раз.

Например:
-	адрес групповой рассылки FFEA:0:0:0:0:CA28:1210:4362 имеет сжатую формуFFEA::CA28:1210:4362.
-	Адрес одноадресной рассылки 3FFE:FFFF:0:0:8:800:02A1:0 в сжатой форме имеет вид: 3FFE:FFFF::8:800:02A1:0.
-	Шлейфовый адрес 0:0:0:0:0:0:0:1 в сжатой форме вы-глядит так ::1.
-	Неопределенный адрес 0:0:0:0:0:0:0:0 превращается в :: .

**Смешанная форма**

Эта форма представляет собой сочетание адресов протоколов IPv4 и IPv6. В этом случае адрес имеет формат n:n:n:n:n:n:d.d.d.d, где каждый символ n соответствует 4-х значному шестнадцатеричному числу (6 шестнадцатеричных чисел, для каждого числа отводится 16 бит), аd.d.d.d -часть адреса, записанная в формате IPv4 (32 бита).

Например:
-	0:0:0:0:0:0:19.8.62.32
-	0:0:0:0:0:FFFF:111.214.2.34

или в сжатом виде:

-	::73.3.68.45
-	::F2F3:129.131.32.31

# Преимущества
**1. Статические "белые" IP-адреса для всех ваших компьютеров (даже за провайдерским NAT)**
На сегодня, если не считать прямого IPv6 (которого российские провайдеры пока не дают), наиболее привлекательным способом подключения к IPv6 является регистрация у так называемого туннельного брокера, т.е. компании, которая предоставляет (бесплатно) услугу «перебрасывания» трафика из IPv4 в IPv6 и обратно.

При использовании такого способа, каждый пользователь не только получает прямой доступ к IPv6-интернету (даже находясь за провайдерским IPv4 NAT'ом!), но и имеет собственную подсеть IPv6, которая привязывается не к его текущему IPv4-адресу, а к его эккаунту (имени и паролю) у брокера. Таким образом имеется возможность не только получить диапазон IPv6-адресов, но и сохранить его за собой даже при смене своего непосредственного провайдера IPv4.

Кроме того, пользователям в полное распоряжение выдаётся как минимум подсеть /64, которой достаточно, чтобы можно было подключить к сети 264 устройств, и дать им всем настоящие («белые»), статические Интернетовские адреса.

Таким образом, в случае, когда в вашей локальной сети – несколько компьютеров, и необходимо обеспечить доступ к сервисам некоторых из них снаружи, более не нужно изощряться с пробросом портов на NAT-шлюзе и их запоминанием («так, порт 20022 - это SSH на компьютер в спальне, а 20122 - на тот, что в гостинной»), достаточно просто подключиться к нужному компьютеру, указывая не адрес шлюза, а адрес этого компьютера напрямую.

Может возникнуть вопрос – а как быть с безопасностью? Отсутствие в IPv6-мире NAT, неверно воспринимаемого некоторыми как средство защиты сети от вторжений, на возможность обезопаситься от взломщиков никоим образом не влияет. Достаточно настроить файрвол таким образом, чтобы он не пропускал из Интернета в локальную сеть входящих соединений, кроме тех, которые вы специально хотите разрешить. В GNU/Linux для этих целей имеется инструмент ip6tables, являющийся аналогом используемого для настройки IPv4-файрвола iptables.

**2. Более высокая скорость скачивания торрентов**

Протокол BitTorrent построен таким образом, что находящиеся за провайдерским NAT и не имеющие возможности принимать входящие соединения пользователи могут «торрентить» файлы только с тех, кто за таким NAT'ом не находится (т.е имеет возможность принять входящее соединение). Это очень существенное ограничение даже сегодня, но вдвойне – в ближайшие годы, т.к. по мере исчерпания IPv4-адресов, всё больше провайдеров будут забирать у пользователей реальные IPv4 и «садить» их за NAT. Таким образом, количество торрентовских peer'ов и seed'ов, имеющих связность между собой, будет падать, вплоть до полной невозможности выкачать некоторые малопопулярные торренты.

Для тех, кто настроил IPv6, эта проблема становится полностью неактуальной. В мире IPv6, все компьютеры могут получить настоящие, «белые» IP-адреса – и благодаря технологиям «заворачивания» IPv6 в IPv4, сделать это можно даже находясь за IPv4 NAT'ом.

[![Флаги](http://imgur.com/FX3whPS)](http://imgur.com/FX3whPS)

Чтобы задействовать новый протокол при скачивании/раздаче торрентов, необходима его поддержка со стороны трекера. IPv6 на сегодня поддерживают два из трёх крупнейших российских трекеров, и к примеру на форуме NoNaMe-Club обсуждение нового протокола развернулось уже более чем на 50 страниц.

Стоит отметить, что после включения IPv6, торренты могут работать быстрее не только у тех, кто находится за злобными провайдерскими NAT, а у всех, сделавших это. Всё дело в том, что имея настроенный доступ в IPv6-интернет, вы получаете возможность качать и с компьютеров тех пользователей Сети, у которых по разным причинам нет возможности раздавать файлы по IPv4. И в конечном итоге, видя больше seed'ов и больше peer'ов – получаете более высокую скорость.

Если вы пользуетесь GNU/Linux, и IPv6 вам интересен прежде всего для скачивания торрентов, вы можете установить себе поддержку IPv6 всего за минуту, без необходимости настраивать её вручную.

**3. Более высокая скорость скачивания чего угодно**

Если ваш провайдер внедрил IPv4 NAT и параллельно с ним нативный IPv6, вы вполне можете обнаружить, что доступ к интернет-ресурсам по IPv6 у вас работает гораздо быстрее, надёжнее и беспроблемней, чем по IPv4 через NAT.

Объяснение этому простое: Carrier-grade NAT, т.е. трансляция адресов для десятков тысяч абонентов (и хранение в памяти информации о сотнях тысяч установленных ими соединений) – задача крайне ресурсоёмкая даже для очень дорогих специализированных провайдерских роутеров. Неудивительно, что в часы пиковой нагрузки оборудование, отвечающее у вашего провайдера за NAT, может оказаться перегруженным.

В случае же доступа к какому-либо ресурсу по IPv6, никакой трансляции адресов не требуется, провайдером выполняется простая маршрутизация без какой-либо обработки пакетов или отслеживания открытых соединений, а для этого достаточно гораздо меньших вычислительных ресурсов и более дешёвого (а значит вполне вероятно установленного с достаточным запасом) оборудования.

# Эксплуатационная эффективность IPv6

Реализация IPv6, предлагаемая Juniper Networks, гарантирует высокую эксплуатационную эффективность:
-	обеспечение исключительно высокой производительности при использовании IP услуг;
-	развертывание на всех платформах серии М;
-	упрощенные средства управления;
-	облегчение перехода от IPv4 к IPv6.

**Характеристики IPv6**

Решения форвардинга с использованием специализированных ИС и ОС JUNOS, предложенные Juniper
Networks, демонстрируют высокую производительность даже при работе сети в экстремальных условиях.
Успешное развертывание в глобальных сетях поставщиков услуг и проводившиеся тесты
продемонстрировали превосходство Juniper Networks в области IP-маршрутизации. Это же относится и к протоколу IPv6. Гарантирована успешность развертывания IPv6 и стабильная производительность в
реальных условиях. Более того, протоколы IPv4 и IPv6 могут функционировать одновременно, обеспечивая
предоставление стабильных, масштабируемых IP-услуг.

**Единообразная поддержка IPv6 на платформах серии М**

Принципы, положенные в основу разработки наших продуктов, гарантируют надежность и предоставление
общих IP-услуг. Мы обеспечиваем полную совместимость при работе с различными приложениями в
различных условиях: магистральное управление, доступ, пиринг в частных и открытых сетях, Web-хостинг и предоставление контента, услуги мобильной связи. Протокол IPv6 поддерживается всеми платформами и
интерфейсами серии М, что обеспечивает высокую масштабируемость и простоту конфигурирования и эксплуатации, характерные для всех продуктов от Juniper Networks.

**Простота развертывания IPv6**

Конфигурирование и обслуживание IPv6 производится посредством командной строки и программного
интерфейса JUNOScript. В частности, использование JUNOScript обеспечивает мгновенную поддержку IPv6
со стороны системы обеспечения эксплуатации (OSS), что минимизирует время простоя при переходе от
конфигурирования протокола IPv6 к эксплуатации его в действующей сети.

Мы также предлагаем полный спектр протоколов маршрутизации IGP и EGP масштаба Интернета, что
упрощает развертывание IPv6. Протоколы IS-IS и RIPng обеспечивают гибкий выбор внутренней схемы
маршрутизации, а протокол BGP для IPv6 в реализации Juniper Networks реально обеспечивает
маршрутизацию в масштабе Интернета.

**А разве IPv4 и IPv6 не похожи?**

Нет. Совершенно не похожи. Уровень у протоколов один уровень — сетевой. На этом их сходство и заканчивается. IPv4 и IPv6 — это два совершенно разных протокола. Самое важное отличие протоколов, заметное даже визуально, заключается в длине адресного пространства. В то время как четвертая версия протокол использует 32-битные адреса в виде набора из четырех октетов, в шестой версии адрес имеет длину уже 128 бит. К тому же, IPv6 значительно более сложен и технологически сильно продвинут, вплоть до наличия элементов маршрутизации уже на уровне заголовков.

**Плавный переход от IPv4 к IPv6**

Механизмы интеграции и перехода играют ключевую роль в упрощении работы и минимизации стоимости
при внедрении IPv6. Хотя предложено большое число таких механизмов, рассмотрим сначала наиболее
важные, позволяющие осуществить первые шаги в направлении плавного перехода от IPv4 к IPv6.

**Двойной стек**

Метод двойного стека предусматривает параллельную работу стеков протоколов IPv4 и IPv6. Приложения
IPv4 связываются с хостами IPv4, приложения IPv6 связываются с хостами IPv6, при этом не производится
трансляция между IPv4 и IPv6. Мы поддерживаем протоколы IPv4 и IPv6 на всех интерфейсах.

**Конфигурируемые туннели**

Для регулярно обменивающихся трафиком сайтов можно соединять хосты или сети IPv6 поверх
существующей инфраструктуры IPv4 с помощью конфигурируемых туннелей. При этом методе,
совместимом с рекомендацией RFC 2893, пакеты IPv6 инкапсулируются в заголовках IPv4. Маршрутизатор
инкапсуляции использует оконечную точку созданного туннеля как адрес назначения для пакетов,
проходящих по туннелю IPv4.

**Транспорт MPLS**

  Используя кросс-коммутацию каналов MPLS, можно обеспечить связь хостов IPv6 через сеть IPv4 по
туннелю "точка-точка". Пакеты IPv6 инкапсулируются в заголовки MPLS. Остается только задать входному
маршрутизатору адрес туннеля.

Виртуальные частные сети (VPN) уровня 2 протокола MPLS упрощают транспорт MPLS за счет
использования протокол BGP для сигнализации VPN, что исключает необходимость вручную отображать каждый канал на маршрут коммутации меток.

[![Схема](http://imgur.com/dIj1HGe)](http://imgur.com/dIj1HGe)

Список поддерживаемых IPv6 рекомендаций RFC приведен в руководстве по конфигурированию IPv6.

# Обнаружение соседа (neighbor discovery)

Термин «обнаружение» может ввести в заблуждение, так как узлы используют механизмы как для информирования других узлов о своем присутствии в сети, так и для определения параметров, таких как расположение узла, доступность маршрутизаторов, MTU канала и конфигурация адреса. Хотя основные механизмы обнаружения изложены в RFC 2461, некоторые методы обнаружения являются специфичными для конкретных типов связей. Механизмы обнаружения часто реализованы аналогично групповой рассылке и заменяют такие функции IPv4 как ARP (протокол преобразования адресов), IRDP (протокол анализа ICMP-маршрутизаторов), IGMP (межсетевой протокол управления группами) и перенаправление ICMP.

# Методы обнаружения маршрутизаторов

Механизм обнаружения используется маршрутизаторами для различных целей. Маршрутизаторы применяют групповую рассылку сообщений Объявление маршрутизатора (Router Advertisement), через регулярные промежутки времени и при ответе на запросы Ходатайство маршрутизатора (Router Solicitation). Сообщения объявление маршрутизатора включают в себя следующую информацию, необходимую для конфигурирования узлов: 

- адреса маршрутизаторов уровня связи; 

- префиксы связи (соответствующие маски подсети в IPv4);

- MTU связи; 

- рекомендуемое ограничение переходов. 

Каждый маршрутизатор, объявляя свой физический адрес, тем самым позволяет другим узлам в сети определить наличие маршрутизатора. Объявляя префикс связи маршрутизатор, позволяет узлам определить, к какой подсети они подключены, и таким образом построить внутреннюю таблицу маршрутизации. В IPv6-пакете с каждым переходом уменьшается значение количества переходов, хранящееся в поле Предел переходов (Hop Limits), а не время жизни пакета (TTL). Отправляя рекомендуемое ограничение переходов в поле Предел переходов (Hop Limits), маршрутизатор помогает узлам определить, доступен ли пункт назначения по данному маршруту. К тому же, для правильного функционирования многоадресной рассылки все узлы, использующие одну связь, должны использовать одинаковое значение MTU.

Используя сообщения Объявление маршрутизатора, маршрутизаторы также могут быть сконфигурированы для распределения входящей нагрузки. Маршрутизаторы могут иметь несколько интерфейсов, подключенных к одной связи. Конечно, эти интерфейсы могут быть представлены в виде одного интерфейса с несколькими адресами, а маршрутизатор может не включать исходящие адреса в сообщение Объявление маршрутизатора. В таком случае хосты ожидающие отправки пакетов на маршрутизатор будут использовать запрос Ходатайство соседа (Neighbor Solicitation) для получения адреса интерфейса маршрутизатора. Маршрутизатор может отправлять различные адреса в ответах на запросы, отправленные различными хостами. Все хосты будут предполагать, что они отправляют пакеты на единственный интерфейс с несколькими адресами, в действительности же маршрутизатор может таким образом разделять входящий трафик между всеми подключенными интерфейсами.

# Обнаружение хоста

Хосты используют механизмы обнаружения в основном, как исследовательский инструмент, хотя они будут также отвечать на запросы, информируя о своей собственной конфигурации. При инициализации хост может отправить запрос маршрутизатору для определения способа конфигурирования собственного адреса: либо с  возможностью изменить собственный адрес во время работы, либо без возможности изменения. Автоконфигурирование с возможностью динамического назначения адреса используется при выдаче адреса хосту посредством службы DHCP.

Как описано в RFC 2462, автоконфигурирование без возможности изменения адреса разрешено хостам при самостоятельном назначении адреса, с помощью рассылки пакетов для выяснения того, используется ли данный адрес другими узлами в связи, и конфигурировании остальных параметров связи или сайта на основе информации, полученной хостом в сообщение Объявление маршрутизатора.

**Дополнительная информация.** Автоконфигурирование без возможности изменения адреса описано в RFC 2462. Данный документ находится в папке \RFC на прилагаемом к книге компакт-диске.
Если узлу необходимо взаимодействовать с другим узлом, он отправляет сообщение Neighbor Solicitation (ходатайство соседа) на специальный адрес, называемый Целевым адресом ходатайствующего узла для многоадресной рассылки (solicited node multicast address) с целью анализа соседа на уровне связи. Узел-отправитель включает в это сообщение Ходатайства соседа (Neighbor Solicitation) свой собственный адрес уровня связи, чтобы узел-получатель мог кэшировать результаты, что исключает необходимость отправки встречного запроса узлом-получателем аналогичного ходатайства. В ответ на запрос узел-получатель отправит сообщение Объявление соседа (Neighbor Advertisement), включающее свой собственный адрес уровня связи.

Когда между двумя узлами установлено взаимодействие, каждый узел полагается на протоколы верхнего уровня для подтверждения того, что пакеты были успешно отправлены или получены. Если такое подтверждение отсутствует, для определения функционирования соседнего узла данный узел решает задачу, называемую Обнаружение недостижимости соседа (Neighbor Unreachability Detection), отправляя одноадресный запрос Ходатайства соседа непосредственно на этот узел. Если двухстороннее соединение не будет подтверждено, узел перестанет отправлять пакеты на недоступный адрес.

# Поддержка двух стеков протоколов

Простейший метод обеспечения функциональности IPv6 состоит в разрешении поддержки двух стеков протоколов  каждым узлом. Узлы, использующие два стека протоколов, могут взаимодействовать через любой из стеков. При этом такие узлы могут использовать адреса IPv4 и IPv6, соответствующие каждому протоколу. Это даже не является требованием реализации, поскольку два адреса совершенно независимы. Такие узлы также могут выполнять туннелирование IPv6 через IPv4. Поскольку каждый стек полностью функционален, узлы могут конфигурировать свои IPv6-адреса как посредством автоконфигурирования без возможности изменения адреса, так и с помощью DHCP, при этом для IPv4-адресов использовать любой из современных методов конфигурирования.

# Взаимодействие в смешанных средах

Поскольку осуществить переход с IPv4 на IPv6 в короткий срок - задача
   неосуществимая, было разработано несколько технологий взаимодействия в
   смешанных средах. Это: туннелирование, двойной стек и трансляция
   протоколов.

   Суть туннелирования состоит в том, что пакет данных IPv6
   инкапсулируется в данные пакета IPv4. Такой пакет IPv4 содержит в себе
   два заголовка IPv6 и IPv4, что в свою очередь позволяет передавать его
   через обычные IPv4-сети. Он доставляется к узлу декапсуляции, где
   производится отбрасывание заголовка IPv4 и передача данных к
   IPv6-устройству. В зависимости от того, где происходит инкапсуляция и
   декапсуляция, выделяют три вида туннелирования: "Маршрутизатор -
   Маршрутизатор", "Хост - Маршрутизатор","Маршрутизатор - Хост".

   Реализация двойного стека подразумевает поддержку устройством
   одновременно протоколов IPv6 и IPv4. Первая поддержка двойного стека
   появилась в Windows XP и Windows Server 2003, где администраторы могли
   дополнительно установить компонент протокола IPv6.

   И последний вариант - трансляция протокола. Сама трансляция не что
   иное, как согласование двух протоколов путем преобразования сообщений,
   поступающих от одной сети в формат другой сети. Один из вариантов
   заключается в использовании протокол-шлюзов, размещенных на границах
   между IPv6-сетями и IPv4-сетями.

# Зло или неизбежность?

   Пару лет назад, после публикации предварительного RFC, согласно
   которому переход на IPv6 должен завершиться до 2011 года, на одном из
   форумов был проведет опрос. Системным администраторам было задано два
   вопроса: планируют ли они переход на IPv6 и как они к нему относятся.

Самыми популярными ответами стали: "Я еще не размышлял на эту тему" и
   "IPv6 - это неизбежное зло, с которым придется мириться". Результаты
   очень хорошо отражали развитие IPv6 в России. Хотя с того времени
   прошло около двух лет, ситуация кардинально не изменилась. Если верить
   сайту ipv6.ru, сегодня по количеству выделенных блоков IPv6-адресов
   Россия занимает 19-е место в Европе и 29-е место в мире. Посмотрев за
   пределы России, можно увидеть отсутствие поддержки IPv6 на большинстве
   популярных ресурсов, что явно не ускорит переход.

 В любом случае набором минимальных IPv6-знаний системный администратор
   должен обладать, дабы не впадать в ступор при виде результата ipconfig
   в Windows 7.

# Туннелирование IPv6 через IPv4

Второй метод реализации IPv6 в окружении IPv4 заключается в туннелировании пакетов IPv6 внутри пакетов IPv4. Эти узлы могут включать свои IPv4 адреса в IPv6-адреса, совместимые с IPv4-адресами, используя предшествующий IPv4 адресу 96-битный префикс «0:0:0:0:0:0». В случае применения этого метода не требуется немедленная замена маршрутизаторов в сети на совместимые с IPv6, но серверы DNS в такой смешанной сети должны поддерживать протоколы обеих версий. Для помощи в достижении этой цели, адресам IPv6 определен новый тип записи DNS «АААА».

Поскольку DNS-серверы Windows 2000 поддерживают этот тип записи, также как и записи типа «А» для IPv4, протокол IPv6 может быть легко реализован в среде Windows 2000. Дополнительную информацию о DNS в Windows 2000 смотрите в главе 16 этой книги.

# Заключение

Безусловно, поддержка протокола IPv4 будет продолжаться еще несколько лет. Тем не менее, ему недоступна функциональность IP, которую предоставляет IPv6 за счет расширяемости и богатых конфигурационных возможностей. Разработка IPv6 продолжается согласно концепции, изложенной в этой книге, но протокол быстро достигает завершенного состояния.  Когда протокол IPv6 будет окончательно развернут, он сможет предоставить примерно 1500 IP-адресов для каждого квадратного ангстрема (10-10м) на планете, отлично обеспечивая любые сетевые потребности, что ранее считалось научной фантастикой.